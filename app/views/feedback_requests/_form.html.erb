<%
  form_id = 'feedback_request-form' unless local_assigns[:form_id]
  entity = FeedbackRequest.new unless local_assigns[:entity]
%>
<%= form_with model: entity, html: { id: form_id } do |f| %>
  <div class="fields state-1">
    <%=
      f.text_field(
          :name,
          size:        nil,
          maxlength:   FeedbackRequest::NAME_LIMIT,
          placeholder: t('activerecord.attributes.feedback_request.name'),
          aria:        {
              label: t('activerecord.attributes.feedback_request.name')
          },
          required:    true
      )
    %>
    <% unless local_assigns[:hide_phone] %>
      <%=
        f.phone_field(
            :phone,
            size:        nil,
            maxlength:   FeedbackRequest::PHONE_LIMIT,
            placeholder: t('activerecord.attributes.feedback_request.phone'),
            aria:        {
                label: t('activerecord.attributes.feedback_request.phone')
            },
            required:    true
        )
      %>
    <% end %>
    <% unless local_assigns[:hide_email] %>
      <%=
        f.email_field(
            :email,
            size:        nil,
            maxlength:   FeedbackRequest::EMAIL_LIMIT,
            placeholder: t('activerecord.attributes.feedback_request.email'),
            aria:        {
                label: t('activerecord.attributes.feedback_request.email')
            },
            required:    true
        )
      %>
    <% end %>
    <% unless local_assigns[:hide_comment] %>
      <%= f.text_area(
              :comment,
              cols:        20,
              rows:        5,
              maxlength:   FeedbackRequest::COMMENT_LIMIT,
              placeholder: t('activerecord.attributes.feedback_request.comment'),
              aria:        {
                  label: t('activerecord.attributes.feedback_request.comment')
              }
          )
      %>
    <% end %>
    <div>
      <%= check_box_tag :agree, '1', false, class: 'visually-hidden', tabindex: -1 %>
      <%= f.check_box :consent, id: :feedback_request_consent, required: true %>
      <%= f.label :consent %>
    </div>
  </div>
  <div class="buttons state-1">
    <%= hidden_field_tag 'form_id', form_id %>
    <%= button_tag(t(:submit), type: :submit, class: 'button-primary') %>
  </div>

  <div class="result hidden state-2"><%= t('.result') %></div>
<% end %>
