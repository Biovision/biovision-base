<%= render partial: 'shared/list_of_errors', locals: { entity: entity } %>

<%= form_tag my_profile_path, method: :patch, multipart: true do %>
    <table>
      <caption><%= t('my.profiles.edit.title') %></caption>
      <tbody>
      <tr>
        <th colspan="2"><%= t('.common_parameters') %></th>
      </tr>
      <tr>
        <td colspan="2">
          <figure class="preview" id="user-image">
            <%= image_tag entity.image.profile.url, alt: t(:current_image) %>
            <figcaption>
              <%= label_tag :user_image, t('.update_image') %>
              <%= file_field_tag 'user[image]', accept: 'image/jpeg,image/png', data: { image: 'user-image' } %>
            </figcaption>
          </figure>
        </td>
      </tr>
      <tr>
        <th><%= label_tag :user_profile_name, t('activerecord.attributes.user_profile.name') %></th>
        <td><%= text_field_tag 'user_profile[name]', entity.user_profile.name, size: 30, maxlength: UserProfile::NAME_LIMIT %></td>
      </tr>
      <tr>
        <th><%= label_tag :user_profile_patronymic, t('activerecord.attributes.user_profile.patronymic') %></th>
        <td><%= text_field_tag 'user_profile[patronymic]', entity.user_profile.patronymic, size: 30, maxlength: UserProfile::NAME_LIMIT %></td>
      </tr>
      <tr>
        <th><%= label_tag :user_profile_surname, t('activerecord.attributes.user_profile.surname') %></th>
        <td><%= text_field_tag 'user_profile[surname]', entity.user_profile.surname, size: 30, maxlength: UserProfile::NAME_LIMIT %></td>
      </tr>
      <tr>
        <th><%= label_tag :user_profile_gender, t('activerecord.attributes.user_profile.gender') %></th>
        <td>
          <%= select_tag 'user_profile[gender]', options_for_select(genders_for_select, selected: entity.user_profile.gender) %>
        </td>
      </tr>
      <tr>
        <th><%= label_tag :user_profile_birthday, t('activerecord.attributes.user_profile.birthday') %></th>
        <td><%= date_field_tag 'user_profile[birthday]', entity.user_profile.birthday, size: 10 %></td>
      </tr>
      <tr>
        <td colspan="2">
          <%= hidden_field_tag 'user[allow_mail]', '0' %>
          <%= check_box_tag 'user[allow_mail]', '1', entity.allow_mail %>
          <%= label_tag :user_allow_mail, t('activerecord.attributes.user.allow_mail') %>
        </td>
      </tr>
      <tr>
        <th colspan="2"><%= t('.sensitive_parameters') %></th>
      </tr>
      <tr>
        <td colspan="2"><p class="notice"><%= t('.sensitive_parameters_notice') %></p></td>
      </tr>
      <tr>
        <th><%= label_tag :password, t('.current_password') %></th>
        <td><%= password_field_tag 'password', '', size: 30 %></td>
      </tr>
      <tr>
        <th><%= label_tag :user_email, t('activerecord.attributes.user.email') %></th>
        <td><%= email_field_tag 'user[email]', entity.email, size: nil, maxlength: User::EMAIL_LIMIT %></td>
      </tr>
      <tr>
        <th><%= label_tag :user_phone, t('activerecord.attributes.user.phone') %></th>
        <td><%= telephone_field_tag 'user[phone]', entity.phone, size: nil, maxlength: User::PHONE_LIMIT %></td>
      </tr>
      <tr>
        <td colspan="2"><p class="notice"><%= t('.leave_blank_if_necessary') %></p></td>
      </tr>
      <tr>
        <th><%= label_tag :profile_password, t('.new_password') %></th>
        <td><%= password_field_tag 'user[password]', '', size: 30, maxlength: 70 %></td>
      </tr>
      <tr>
        <th><%= label_tag :profile_password_confirmation, t('activerecord.attributes.user.password_confirmation') %></th>
        <td><%= password_field_tag 'user[password_confirmation]', '', size: 30, maxlength: 70 %></td>
      </tr>
      </tbody>
      <tfoot>
      <tr>
        <td colspan="2"><%= button_tag t('.update'), type: :submit %></td>
      </tr>
      </tfoot>
    </table>
<% end %>
